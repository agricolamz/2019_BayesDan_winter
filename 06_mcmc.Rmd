---
title: "6. Марковские цепи"
author: "Г. Мороз"
editor_options: 
  chunk_output_type: console
---

```{r child = 'preamble.Rmd'}
```

## 1. Рандомизаторы
### 1.1 Простой случай
В нашем курсе мы обсуждали несколько рандомизаторов (`rnorm()`, `rbeta()` и так далее). Но вернемся к более простому случаю. Сделаем одну выборку из множества, содержащего три элемента:

```{r}
sample(x = 5:7)
```

По умолчанию он выдает множество равное количество объектов в векторе.

```{r, error=TRUE}
sample(x = 5:7, size = 1)
sample(x = 5:7, size = 4)
sample(x = 5:7, size = 4, replace = TRUE)
```

Можно задавать вероятности, с которыми рандомизатора вынимает то или иное значение (по умолчанию все исходы равновероятны):

```{r}
sample(x = 5:7, size = 10000, replace = TRUE) %>% 
  table() %>% 
  prop.table()
sample(x = 5:7, size = 10000, replace = TRUE, 
       prob = c(0.1, 0.3, 0.6)) %>% 
  table() %>% 
  prop.table()
```

Записи идентичны:
```{r}
sample(1:10)
sample(10)
```

Чтобы фиксировать рандомизатор следует использовать `set.seed()`. Посмотрите [прекрасную работу](https://benjaminlmoore.wordpress.com/2014/03/06/most-common-rng-seeds-r-github/) Бена Мура на тему того, какие кто использует сиды на GitHub. 

Иногда хочется, чтобы рандомизатор был одинаковый в R и Python, зачем и как это делать читайте в работе Гертьяна ван ден Бург: [блог](https://gertjanvandenburg.com/blog/syncrng/), [гитхаб](https://github.com/GjjvdBurg/SyncRNG).

### 1.2 Сэмплирование из датафрейма
```{r}
mtcars[sample(nrow(mtcars), 7),]
mtcars %>% 
  sample_n(7)
```

```{r, eval=FALSE}
library(data.table)
mtcars[sample(.N, 7)]
```

## 2. Марковские цепи
Марковский процесс

* конечное количество состояний
* вероятность переходов из одного состояния в другое

Скачайте датасет, который содержит роман "По эту сторону рая" Ф. С. Фицджеральда
```{r}
fitzgerald <- read_csv("")
```


[Славная визуализация](http://setosa.io/blog/2014/07/26/markov-chains/index.html) (спасибо за ссылку Марине Дубовой)